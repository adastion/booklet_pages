(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();function p(e){e.classList.add("btn__animate"),setTimeout(()=>{e.classList.remove("btn__animate")},1e3)}const l={_allPages:4,_bookletSize:1,get allPages(){return this._allPages},set allPages(e){return typeof e=="number"&&e<=6e3?this._allPages=e:this._allPages=NaN,this.notify()},get bookletSize(){return this._bookletSize},set bookletSize(e){return typeof e=="number"?this._bookletSize=e:this._bookletSize=NaN,this.notify()},get bookletPages(){return this.bookletSize*4},get firstPageCount(){return 1},get lastPageCount(){return this.bookletPages},get pagesForPrint(){return Math.ceil(this.allPages/this.lastPageCount)},_resultArray:[],get resultArray(){return this._resultArray},_pagesA4:0,initPagesA4(){this._pagesA4=Math.ceil(this._allPages/4),this.notify()},decrementA4(){this._pagesA4-=this.bookletSize,this.notify()},incrementA4(){this._pagesA4+=this.bookletSize,this.notify()},get listInfo(){return[{name:"Требуется листов А4",value:this._pagesA4},{name:"Всего буклетов",value:this.resultArray.length},{name:"Cтраниц в буклете",value:this.bookletPages},{name:"Страниц в книге",value:this.allPages}]},addToResultArray(e){this._resultArray.push({value:e,isActive:!0}),this.notify()},clearResultArray(){this._resultArray=[]},_subscribers:[],subscribe(e){this._subscribers.push(e)},notify(){this._subscribers.forEach(e=>e())},setData(e,r){this._allPages=e,this._bookletSize=r,this.notify()}};function h({message:e,isWarning:r}){const s=document.createElement("div");s.classList.add("modal","modal--animate");const t=document.createElement("p");if(t.classList.add("modal__content"),r){s.classList.remove("modal--animate"),s.classList.add("modal--animate-warning"),t.classList.add("modal--warning");const n=document.createElement("button");return n.classList.add("btn","btn--theme","modal__btn"),n.textContent="X",n.addEventListener("click",a=>{a.preventDefault(),s.classList.remove("modal--animate-warning"),s.classList.add("modal--animate-warning-reverse"),setTimeout(()=>{s.remove()},300)},{once:!0}),t.textContent=e,s.append(t,n),s}return t.textContent=e,s.append(t),s}function u({parentElement:e,message:r,time:s,isWarning:t}){e.classList.add("relative");const n=e.querySelector(".modal");n&&n.remove();const a=h({message:r,isWarning:t});e.append(a),setTimeout(()=>{a&&t===!1&&a.remove()},s||1e3)}function b(e,r,s){const t=document.createElement("button");t.classList.add("btn");{const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","use");a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r),n.classList.add("icon"),n.append(a),t.append(n)}return t.addEventListener("click",n=>{if(n.preventDefault(),l.decrementA4(),p(n.currentTarget),e.isActive){const a=n.currentTarget.parentElement;u({parentElement:document.querySelector("body"),message:`Cкопирован👌: ${a.querySelector("code").textContent}`,time:1500,isWarning:!1}),a.classList.add("result__item--disabled"),a.querySelector(".result__content").addEventListener("click",f=>{l.incrementA4(),f.currentTarget.parentElement.classList.remove("result__item--disabled")},{once:!0})}navigator.clipboard.writeText(e.value).catch(a=>console.error("Ошибка копирования: ",a))}),t}function E(e,r){const s=document.createElement("li");s.classList.add("result__item"),r.isActive||s.classList.add("result__item--disabled");const t=document.createElement("code");t.classList.add("result__content");const n=b(r,"#icon-copy");t.textContent=r.value,s.append(t,n),e.append(s)}function m(){const e=l.listInfo,r=document.createElement("ul");return r.classList.add("app__info-list"),e.map(s=>{const t=document.createElement("li"),n=document.createElement("h2");n.textContent=s.name;const a=document.createElement("span");a.textContent=s.value,t.append(n," - ",a),r.append(t)}),r}function y(){const{pagesForPrint:e,allPages:r,resultArray:s}=l;if(s.length===0)return;const t=e-1,a=`${s[t].value.split(" - ")[0]} - ${r}`;s[t].value=a}function _(){l.clearResultArray();const{pagesForPrint:e,bookletPages:r}=l;let s=1,t=r;for(let n=0;n<e;n++)l.addToResultArray(`${s} - ${t}`),s=t+1,t=s+(r-1);y(),l.initPagesA4()}function v(e,r){return Number(e.value)<=6e3&&Number(r.value)<=100?(l.setData(Number(e.value),Number(r.value)),!0):(u({parentElement:document.querySelector(".form"),message:"🤔 Страниц в книге максиму - 6000, Листов А4 максимум - 100",time:null,isWarning:!0}),!1)}function L(){const e=document.querySelector("body"),r=document.getElementById("theme-trigger"),s=["dark","light"];let t=localStorage.getItem("theme");t===null&&(t=s[0],e.dataset.theme=t),e.dataset.theme=t,r.textContent=t==="dark"?"Включить светлю тему":"Включить тёмную тему",r.addEventListener("click",n=>{t===s[0]?t=s[1]:t=s[0],localStorage.setItem("theme",t),e.dataset.theme=t,n.currentTarget.textContent=t==="dark"?"Включить светлю тему":"Включить тёмную тему"})}function P(e,r){l.resultArray.map(t=>{r(e,t)})}function A(e,r){e.value=l.allPages,r.value=l.bookletSize}const S=document.getElementById("btn-calculate"),i=document.querySelector(".app__info"),c=document.querySelector(".result__list"),d=document.getElementById("allPages"),g=document.getElementById("bookletPages");A(d,g);S.addEventListener("click",e=>{e.preventDefault(),c.innerHTML="",v(d,g)&&_(),P(c,E)});i.append(m());l.subscribe(()=>{i.innerHTML="",i.append(m())});L();
