(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function f(e){e.classList.add("btn__animate"),setTimeout(()=>{e.classList.remove("btn__animate")},1e3)}function p(e,s,r){const t=document.createElement("button");t.classList.add("btn");{const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),l=document.createElementNS("http://www.w3.org/2000/svg","use");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s),n.classList.add("icon"),n.append(l),t.append(n)}return t.addEventListener("click",n=>{if(n.preventDefault(),f(n.currentTarget),e.isActive){const l=n.currentTarget.parentElement;setTimeout(()=>{l.classList.add("result__item--disabled")},450),l.querySelector(".result__content").addEventListener("click",g=>{g.currentTarget.parentElement.classList.remove("result__item--disabled")})}navigator.clipboard.writeText(e.value).catch(l=>console.error("Ошибка копирования: ",l))}),t}function h(e,s){const r=document.createElement("li");r.classList.add("result__item"),s.isActive||r.classList.add("result__item--disabled");const t=document.createElement("code");t.classList.add("result__content");const n=p(s,"#icon-copy");t.textContent=s.value,r.append(t,n),e.append(r)}const o={_allPages:4,_bookletSize:1,get allPages(){return this._allPages},set allPages(e){return typeof e=="number"&&e<=6e3?this._allPages=e:this._allPages=NaN,this.notify()},get bookletSize(){return this._bookletSize},set bookletSize(e){return typeof e=="number"?this._bookletSize=e:this._bookletSize=NaN,this.notify()},get bookletPages(){return this.bookletSize*4},get firstPageCount(){return 1},get lastPageCount(){return this.bookletPages},get pagesForPrint(){return Math.ceil(this.allPages/this.lastPageCount)},_resultArray:[],get resultArray(){return this._resultArray},get listInfo(){return[{name:"Требуется листов А4",value:Math.ceil(this._allPages/4)},{name:"Всего буклетов",value:this.resultArray.length},{name:"Cтраниц в буклете",value:this.bookletPages},{name:"Страниц в книге",value:this.allPages}]},addToResultArray(e){this._resultArray.push({value:e,isActive:!0}),this.notify()},clearResultArray(){this._resultArray=[]},_subscribers:[],subscribe(e){this._subscribers.push(e)},notify(){this._subscribers.forEach(e=>e())},setData(e,s){this._allPages=e,this._bookletSize=s,this.notify()}};function u(){const e=o.listInfo,s=document.createElement("ul");return s.classList.add("app__info-list"),e.map(r=>{const t=document.createElement("li"),n=document.createElement("h2");n.textContent=r.name;const l=document.createElement("span");l.textContent=r.value,t.append(n," - ",l),s.append(t)}),s}function b(){const{pagesForPrint:e,allPages:s,resultArray:r}=o;if(r.length===0)return;const t=e-1,l=`${r[t].value.split(" - ")[0]} - ${s}`;r[t].value=l}function E(){o.clearResultArray();const{pagesForPrint:e,bookletPages:s}=o;let r=1,t=s;for(let n=0;n<e;n++)o.addToResultArray(`${r} - ${t}`),r=t+1,t=r+(s-1);b()}function y(e,s){if(Number(e.value)<=6e3&&Number(s.value)<=100)o.setData(Number(e.value),Number(s.value));else return alert("Слишкаом большое значение. Страниц в книге максиму - 6000, cтраниц в , буклете максиму -")}function _(){const e=document.querySelector("body"),s=document.getElementById("theme-trigger"),r=["dark","light"];let t=localStorage.getItem("theme");t===null&&(t=r[0],e.dataset.theme=t),e.dataset.theme=t,s.textContent=t==="dark"?"Включить светлю тему":"Включить тёмную тему",s.addEventListener("click",n=>{t===r[0]?t=r[1]:t=r[0],localStorage.setItem("theme",t),e.dataset.theme=t,n.currentTarget.textContent=t==="dark"?"Включить светлю тему":"Включить тёмную тему"})}function P(e,s){o.resultArray.map(t=>{s(e,t)})}function v(e,s){e.value=o.allPages,s.value=o.bookletSize}const L=document.getElementById("btn-calculate"),i=document.querySelector(".app__info"),c=document.querySelector(".result__list"),m=document.getElementById("allPages"),d=document.getElementById("bookletPages");v(m,d);L.addEventListener("click",e=>{e.preventDefault(),c.innerHTML="",y(m,d),E(),P(c,h)});i.append(u());o.subscribe(()=>{i.innerHTML="",i.append(u())});_();
